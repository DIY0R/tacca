<div class="content-article ">

    <span class="user">
        <img src="https://www.un.org/sites/un2.un.org/files/user.png" alt="users" class="user-logo">

        <a href="#">{{name}}</a>
    </span>
    <span><a href="/posts/addPost">Добавить пост</a></span>
</div>{{!-- n --}}

{{#each posts}}



<div class="content-article ">

    <div class="info-user">

        <span class="date-post">{{this.created_at}}</span>
        <input class="delete-post" type="submit" idPost={{this.id}} value="x"/>
    </div>
    <div class="subject">
        <a href="#">
            <h3>Hyundai займётся выпуском шагающих машин</h3>
        </a>

    </div>
    <div class="tegs">
        <span class="tegs">
            <a href="#">Хранение данных</a>
        </span>{{!-- n --}}
        ,
        <span class="tegs">
            <a href="#">Облачные сервисы</a>
        </span>{{!-- n --}}

    </div>
    <div class="photo-post"><img src="http://localhost:5000/posts/postImages/{{this.imgName}}" alt="photo subject">
    </div>
    <div class="short-information">
        <span class="text">{{this.text}}</span>
    </div>
    <div class="actions">

        <a href="#" class="link-post btn "><span>Читать далее</span></a>

    </div>
    <div class="actions-icons">
        <i class="bi bi-star-fill icon-post">+5</i>
        <i class="bi bi-eye-fill icon-post">568</i>
        <i class="bi bi-bookmark-plus-fill icon-post">8</i>
        <i class="bi bi-chat-fill icon-post">72</i>

    </div>
 <div>
    <input type="text" placeholder="comment"> 
    <input type="submit">
 </div>
 <div class="comments">
    <div class="user-text">
        <span><i class="bi bi-person-circle"> DIY0R </i> <span class="date-post">25.08.2022 в 22:07</span></span>
        <div>hello</div>
    </div>
 </div>
</div>{{!-- n --}}

{{/each}}



<script>
    const btnDell = document.querySelectorAll('.delete-post')
    btnDell.forEach((element) => {

        element.addEventListener("click", function (event) {
             event.preventDefault();
    
          
            let request = new XMLHttpRequest();

             request.open("DELETE", "/posts/delete/"+event.target.getAttribute('idpost'), true);   
             request.setRequestHeader("Content-Type", "application/json");
             request.addEventListener("load", function () {
                 let receivedUser = JSON.parse(request.response);
                 console.log(receivedUser);
             });
           request.send(); 
         });
    })

</script>